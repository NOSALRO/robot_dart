# - Config file for the robot_dart package
# example:
# find_package(RobotDART REQUIRED)
# add_executable(robot_dart_example example.cpp)
# target_link_libraries(robot_dart_example RobotDART::Simu)

include(CMakeFindDependencyMacro)

# CMAKE_MODULE_PATH
set(CMAKE_MODULE_PATH "@RobotDART_CMAKE_MODULE_PATH@")

find_dependency(Eigen3 3.3 REQUIRED NO_MODULE)
find_dependency(DART REQUIRED COMPONENTS dart utils utils-urdf collision-bullet collision-ode CONFIG)
find_dependency(Boost REQUIRED COMPONENTS iostreams filesystem thread date_time CONFIG) 

# add the robot_dart paths (we get them from waf)
set(RobotDART_INCLUDE_DIRS "@RobotDART_INCLUDE_DIRS@")
set(RobotDART_LIBRARY_DIRS "@RobotDART_LIBRARY_DIRS@")

# we get the compilation options (AVX) from Dart (-march=native)

set(RobotDART_LIBRARIES "Eigen3::Eigen;${DART_LIBRARIES};${Boost_LIBRARIES}")

add_library(RobotDART::Simu INTERFACE IMPORTED)
set_target_properties(RobotDART::Simu PROPERTIES
  INTERFACE_INCLUDE_DIRECTORIES "${RobotDART_INCLUDE_DIRS}"
  INTERFACE_LINK_DIRECTORIES "${RobotDART_LIBRARY_DIRS}"
  INTERFACE_LINK_LIBRARIES "${RobotDART_LIBRARIES};RobotDARTSimu"
  #INTERFACE_COMPILE_OPTIONS "${RobotDART_DEFINITIONS}"
  )

set(RobotDART_USE_MAGNUM "@RobotDART_USE_MAGNUM@")

if(RobotDART_USE_MAGNUM STREQUAL "True")
  find_dependency(Magnum REQUIRED COMPONENTS @RobotDART_MAGNUM_DEP_LIBS@ CONFIG)
  find_dependency(MagnumIntegration REQUIRED COMPONENTS Dart Eigen CONFIG)
  #find_dependency(MagnumPlugins REQUIRED COMPONENTS AssimpImporter PngImporter CONFIG)
  add_library(RobotDART::Magnum INTERFACE IMPORTED)
  set_target_properties(RobotDART::Magnum PROPERTIES
    INTERFACE_INCLUDE_DIRECTORIES "${RobotDART_INCLUDE_DIRS}"
    INTERFACE_LINK_DIRECTORIES "${RobotDART_LIBRARY_DIRS}"
    INTERFACE_COMPILE_DEFINITIONS "GRAPHIC;@RobotDART_MAGNUM_DEFINITIONS@"
    INTERFACE_LINK_LIBRARIES "@RobotDART_MAGNUM_LIBS@RobotDARTMagnum")
endif()
